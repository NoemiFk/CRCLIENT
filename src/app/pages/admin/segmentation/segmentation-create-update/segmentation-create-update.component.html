
  <div fxLayout="row" fxLayoutAlign="start center" mat-dialog-title>

    <h2 class="headline m-0"
        fxFlex="auto">Nueva Segmentación</h2>

   

    <button class="text-secondary" mat-dialog-close mat-icon-button type="button">
      <mat-icon [icIcon]="icClose"></mat-icon>
    </button>
  </div>

  <mat-divider class="-mx-6 text-border"></mat-divider>

  <mat-dialog-content fxLayout="column">


    <div class="flex flex-col sm:flex-row">
      <mat-form-field class="flex-auto mt-6">
        <mat-label>Segmento</mat-label>
        <input cdkFocusInitial [(ngModel)]="segmentation.name" matInput>

        <mat-icon [icIcon]="icPerson" class="mr-3" matPrefix></mat-icon>
      </mat-form-field>
    </div>
    <div *ngFor="let option of segmentation.criteria | slice:0:3;  let i = index;">
      <h3><b>Información General</b></h3>
     
      <br>
      <div  *ngIf="option.dataSource.length">
        <h3><b>Segmentación</b></h3>
        <table mat-table [dataSource]="option.dataSource" class="mat-elevation-z8 text-center"  style="width: 100%;">
  
          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->
        
          <!-- Position Column -->
          <ng-container matColumnDef="date1">
            <th mat-header-cell *matHeaderCellDef class="text-center uppercase"> <b>33%</b> </th>
            <td mat-cell *matCellDef="let element"> {{element.date1}} </td>
          </ng-container>
        
          <!-- Name Column -->
          <ng-container matColumnDef="date2">
            <th mat-header-cell *matHeaderCellDef class="text-center uppercase"> <b>33%</b>  </th>
            <td mat-cell *matCellDef="let element"> {{element.date2}} </td>
          </ng-container>
        
          <!-- Weight Column -->
          <ng-container matColumnDef="date3">
            <th mat-header-cell *matHeaderCellDef class="text-center uppercase"> <b>33%</b>  </th>
            <td mat-cell *matCellDef="let element"> {{element.date3}} </td>
          </ng-container>
        
          <!-- Symbol Column -->
          <ng-container matColumnDef="date4">
            <th mat-header-cell *matHeaderCellDef class="text-center uppercase"> <b>Sin Información</b></th>
            <td mat-cell *matCellDef="let element"> {{element.date4}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
      <!--div class="flex flex-col sm:flex-row text-center" *ngIf="datas.data.length">
        <div class="flex-auto">
          <b>{{datas.data[0]}}-{{datas.data[1]}}</b>
          <p><b>33%</b></p>
          <br>
          <p>{{datas.lables[0]}} Registros</p>
        </div>
        <div class="flex-auto">
          <b>{{datas.data[1]}}-{{datas.data[2]}}</b>
          <p><b>33%</b></p>
          <br>
          <p>{{datas.lables[1]}} Registros</p>
        </div>
        <div class="flex-auto">
          <b>{{datas.data[2]}}-{{datas.data[3]}}</b>
          <p><b>33%</b></p>
          <br>
          <p>{{datas.lables[2]}} Registros</p>
        </div>
        <div class="flex-auto">
          <b>Sin Información</b>
          <br>
          <p>{{ portafolio.register-datas.lables[0]-datas.lables[1]-datas.lables[2]}} Registros</p>
        </div>
      </div-->
      <div class="flex flex-col sm:flex-row">
        <div class="flex flex-col mt-6">
          <mat-form-field >
            <mat-label>Selecciona Criterio {{option.name}}</mat-label>
            <mat-select  name="criterio1" [(ngModel)]="option.name" (selectionChange)="changeCriterio($event, i)" >
              <mat-option *ngFor="let op of segmentacionData" [value]="op"  >
                {{op}}
              </mat-option>
              <!--mat-option [value]="option.data" *ngFor="let option of segmentacion;">{{option.data}}</mat-option-->
            </mat-select>
      
            <mat-icon [icIcon]="icEditLocation" class="mr-3" matPrefix></mat-icon>
          </mat-form-field>
  
          <!--a color="primary" mat-button >SEGMENTAR</a-->
          <br>
          <div class="flex flex-col sm:flex-row">
            <mat-form-field class="flex-auto">
              <mat-label>Rango A</mat-label>
              <input cdkFocusInitial [(ngModel)]="option.rankA" matInput>
      
              <mat-icon [icIcon]="icPerson" class="mr-3" matPrefix></mat-icon>
            </mat-form-field>
            <mat-form-field class="flex-auto ml-6">
              <mat-label>Rango B</mat-label>
              <input cdkFocusInitial [(ngModel)]="option.rankB"matInput>
      
              <mat-icon [icIcon]="icPerson" class="mr-3" matPrefix></mat-icon>
          </mat-form-field>
          </div>
  
         
        <a (click)="guardar1()" *ngIf="i==0" color="primary" mat-button >AGREGAR</a>
        <a (click)="guardar2()" *ngIf="i==1" color="primary" mat-button >AGREGAR</a>
        <!--a (click)="guardar3()" *ngIf="i==2" color="primary" mat-button >AGREGAR</a>
        <a (click)="guardar4()" *ngIf="i==3" color="primary" mat-button >AGREGAR</a-->
          <br>
          
        </div>
        <div class="flex-auto mt-6 ml-6">

          <div >
            <table mat-table [dataSource]="option.dataSeg" class="mat-elevation-z8 text-center " style="width: 100%;">
          
              <ng-container matColumnDef="Datos_Segmentados">
                <th mat-header-cell *matHeaderCellDef class="text-center uppercase color-header-cell"> <b>Datos Segmentados</b> </th>
                <td mat-cell *matCellDef="let element"> {{element.info}} </td>
              </ng-container>
              <ng-container matColumnDef="Porcentaje">
                <th mat-header-cell *matHeaderCellDef class="text-center uppercase color-header-cell"> <b>Porcentaje</b> </th>
                <td mat-cell *matCellDef="let element"> {{element.porcent}} %</td>
              </ng-container>
              <ng-container matColumnDef="No_Segmentados">
                <th mat-header-cell *matHeaderCellDef class="text-center uppercase color-header-cell"> <b>No Segmentados</b> </th>
                <td mat-cell *matCellDef="let element"> {{element.register}} </td>
              </ng-container>
            
              <tr mat-header-row *matHeaderRowDef="displayedColumnsSEG"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsSEG"></tr>
            </table>
          </div>
          <div *ngIf="!option.dataSeg.length" class="text-center p-10">
                  Datos sin guardar
          </div>
        </div>
      </div>
      <div>
        <div *ngIf="!option.dataGrhap.chart" class="text-center p-10">
          No hay Datos
          <mat-spinner class="m-auto" *ngIf="spinner"></mat-spinner>
       </div>
       <vex-chart [options]="option.dataGrhap.options" *ngIf="option.dataGrhap.chart" [series]="option.dataGrhap.salesSeries"></vex-chart>
      </div>
    </div>
    <a (click)="newCriteria()" color="primary" mat-button >AGREGAR NUERVO CRITERIO</a>
    <!--button (click)="openCriterio2=true"></button-->
   
    
  </mat-dialog-content>


  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close type="button">CANCEL</button>
    <button *ngIf="isCreateMode()" color="primary" mat-button type="submit" (click)="save()">CREAR SEGMENTACIÓN</button>
    <button *ngIf="isUpdateMode()" color="primary" mat-button type="submit" (click)="save()">EDITAR SEGMENTACIÓN </button>
  </mat-dialog-actions>


<mat-menu #settingsMenu="matMenu" xPosition="before" yPosition="below">
  <button mat-menu-item>
    <mat-icon [icIcon]="icPrint"></mat-icon>
    <span>Print</span>
  </button>

  <button mat-menu-item>
    <mat-icon [icIcon]="icDownload"></mat-icon>
    <span>Export</span>
  </button>

  <button mat-menu-item>
    <mat-icon [icIcon]="icDelete"></mat-icon>
    <span>Eliminar</span>
  </button>
</mat-menu>
